<script>
document.addEventListener("DOMContentLoaded", async () => {
  const { data, error } = await supabase
    .from("properties")
    .select("*")
    .order("created_at", { ascending: false });

  const list = document.getElementById("propertiesList");

  if (error) {
    list.innerHTML = "Error loading properties";
    return;
  }

  list.innerHTML = data.map(p => `
    <div class="card">
      <img src="${p.image_url}">
      <div class="card-info">
        <h3>${p.title}</h3>
        <p>${p.description}</p>
        <p><b>${p.price} MAD</b></p>
      </div>
    </div>
  `).join("");
});
</script>
