<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Team - LeadGen Immobilier</title>

<link rel="stylesheet" href="style.css">

<!-- ✅ Load Supabase FIRST -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- ✅ Load your global client -->
<script src="script.js"></script>
</head>

<body>

<header>
  <div class="nav">
    <div class="brand">
    <div class="logo">
  <img src="https://drkjmtanzqmjgpltjqcg.supabase.co/storage/v1/object/public/images/assets/logo1.svg" alt="LeadGen Immobilier Logo">
</div>

      <div>
        <div class="brand-name">LeadGen Immobilier</div>
        <div class="brand-tagline">Real estate lead generation & property marketing</div>
      </div>
    </div>

    <nav>
      <a href="index.html">Home</a>
      <a href="properties.html">Properties</a>
      <a class="active" href="team.html">Team</a>
      <a href="contact.html">Contact</a>
      <a href="feedback.html">Feedback</a>
    </nav>
  </div>
</header>

<section>
  <h2>Our Team</h2>

  <!-- ✅ TEAM GRID -->
  <div class="grid" id="teamList"></div>

  <!-- ✅ TEAM MESSAGE AT THE BOTTOM -->
  <div class="team-message">
    <h3>Together, We Build More Than Business</h3>
    <p>
      Behind every successful project is a team driven by passion, integrity,
      and collaboration. At LeadGen Immobilier, we work side by side to create
      meaningful connections, guide opportunities with precision, and turn
      real estate ambitions into lasting success. Our strength lies in unity,
      trust, and the shared belief that great results are built together.
    </p>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", async () => {

  if (!window.supabaseClient) {
    console.error("❌ Supabase client not initialized");
    return;
  }

  const list = document.getElementById("teamList");
  list.innerHTML = "<p>Loading team...</p>";

  const { data, error } = await window.supabaseClient
    .from("team_members")
    .select("id, name, role, image");

  if (error) {
    console.error(error);
    list.innerHTML = "<p>Error loading team.</p>";
    return;
  }

  if (!data || data.length === 0) {
    list.innerHTML = "<p>No team members found.</p>";
    return;
  }

  const BASE_IMAGE_URL =
    "https://drkjmtanzqmjgpltjqcg.supabase.co/storage/v1/object/public/images/";

  list.innerHTML = data.map(t => {
    const imageUrl = t.image
      ? BASE_IMAGE_URL + t.image
      : "https://via.placeholder.com/300";

    return `
      <div class="card">
        <img src="${imageUrl}" alt="${t.name}" class="team-avatar">
        <div class="card-info">
          <h3>${t.name}</h3>
          <p>${t.role}</p>
        </div>
      </div>
    `;
  }).join("");
});
</script>

</body>
</html>
